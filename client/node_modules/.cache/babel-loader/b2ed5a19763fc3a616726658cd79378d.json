{"ast":null,"code":"import _objectSpread from \"/Users/Overseer/Desktop/vievacance/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/Overseer/Desktop/vievacance/client/src/components/ManageMementos/EditMementos/EditMementos-container.js\";\nimport EditMementosView from './EditMementos-view.js';\nimport axios from 'axios';\nimport React from 'react';\n\nvar EditMementos = function EditMementos(_ref) {\n  var owner = _ref.owner,\n      photos = _ref.photos,\n      title = _ref.title,\n      description = _ref.description,\n      id = _ref.id,\n      profilePicture = _ref.profilePicture,\n      username = _ref.username,\n      onClick = _ref.onClick,\n      loadData = _ref.loadData,\n      selectedPhotos = _ref.selectedPhotos,\n      cities = _ref.cities,\n      _id = _ref._id,\n      setError = _ref.setError,\n      wasCalled = _ref.wasCalled,\n      message = _ref.message;\n\n  if (!wasCalled) {\n    window.onload = function () {\n      axios.get(\"/photos/\".concat(owner)).then(function (res) {\n        loadData(res.data.map(function (p) {\n          return photos.includes(p.id) ? _objectSpread({}, p, {\n            active: true\n          }) : p;\n        }), 'PHOTOS');\n      });\n      axios.get(\"/globeData\").then(function (res) {\n        loadData(res.data.map(function (c) {\n          return {\n            city: c.city,\n            country: c.country,\n            active: c.city + ', ' + c.country === title\n          };\n        }), 'CITIES');\n      }).catch(function (err) {\n        return alert(err);\n      });\n      setError('ERR_EDIT');\n    };\n  }\n\n  return React.createElement(EditMementosView, {\n    owner: owner,\n    photos: photos,\n    title: title,\n    description: description,\n    editMemento: function editMemento() {\n      if (!document.querySelector('select').selectedIndex) {\n        setError('ERR_EDIT', 'Select a city');\n        return;\n      } else {\n        var city = cities[document.querySelector('select').selectedIndex - 1].city;\n        var country = cities[document.querySelector('select').selectedIndex - 1].country;\n        var _description = document.querySelector('textarea').value;\n\n        var _photos = selectedPhotos.map(function (p) {\n          return p.id;\n        });\n\n        if (!_photos.length) {\n          setError('ERR_EDIT', 'Select one or more photos');\n          return;\n        } else if (!_description) {\n          setError('ERR_EDIT', 'Write about your trip');\n          return;\n        } else {\n          axios.post(\"/mementos/edit/\".concat(_id), {\n            description: _description,\n            photos: _photos,\n            city: city,\n            country: country\n          }).then(function (res) {\n            if (res.status === 200) {\n              setError('ERR_EDIT', 'Success!');\n              setTimeout(function () {\n                return window.location.reload();\n              }, 1000);\n            }\n          }).catch(function (err) {\n            return alert(err);\n          });\n        }\n      }\n    },\n    id: id,\n    profilePicture: profilePicture,\n    username: username,\n    onClick: onClick,\n    message: message,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27\n    },\n    __self: this\n  });\n};\n\nexport default EditMementos;","map":{"version":3,"sources":["/Users/Overseer/Desktop/vievacance/client/src/components/ManageMementos/EditMementos/EditMementos-container.js"],"names":["EditMementosView","axios","React","EditMementos","owner","photos","title","description","id","profilePicture","username","onClick","loadData","selectedPhotos","cities","_id","setError","wasCalled","message","window","onload","get","then","res","data","map","p","includes","active","c","city","country","catch","err","alert","document","querySelector","selectedIndex","value","length","post","status","setTimeout","location","reload"],"mappings":"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","sourcesContent":["import EditMementosView from './EditMementos-view.js'\nimport axios from 'axios'\nimport React from 'react'\n\nconst EditMementos = ({ owner, photos, title, description, id, profilePicture, username, onClick, loadData, selectedPhotos, cities, _id, setError, wasCalled, message }) => {\n\n    if (!wasCalled) {\n        window.onload = () => {\n            axios.get(`/photos/${owner}`).then(res => {\n                loadData(res.data.map(p => {\n                    return photos.includes(p.id) ? { ...p, active: true } : p\n                }), 'PHOTOS')\n            })\n            axios.get(`/globeData`).then(res => {\n                loadData(res.data.map(c => {\n                    return {\n                        city: c.city,\n                        country: c.country,\n                        active: c.city + ', ' + c.country === title\n                    }\n                }), 'CITIES')\n            }).catch(err => alert(err))\n            setError('ERR_EDIT')\n        }\n    }\n\n    return <EditMementosView owner={owner} photos={photos} title={title} description={description}\n        editMemento={() => {\n            if (!document.querySelector('select').selectedIndex) {\n                setError('ERR_EDIT', 'Select a city')\n                return\n            } else {\n                const city = cities[document.querySelector('select').selectedIndex - 1].city\n                const country = cities[document.querySelector('select').selectedIndex - 1].country\n                const description = document.querySelector('textarea').value\n                const photos = selectedPhotos.map(p => p.id)\n\n                if (!photos.length) {\n                    setError('ERR_EDIT', 'Select one or more photos')\n                    return\n                } else if (!description) {\n                    setError('ERR_EDIT', 'Write about your trip')\n                    return\n                } else {\n                    axios.post(`/mementos/edit/${_id}`, { description, photos, city, country }).then(res => {\n                        if (res.status === 200) {\n                            setError('ERR_EDIT', 'Success!')\n                            setTimeout(() => window.location.reload(), 1000)\n                        }\n                    }).catch(err => alert(err))\n                }\n            }\n\n        }}\n        id={id} profilePicture={profilePicture} username={username} onClick={onClick}\n        message={message} />\n}\n\n\nexport default EditMementos\n"]},"metadata":{},"sourceType":"module"}