{"ast":null,"code":"var _jsxFileName = \"/Users/Overseer/Desktop/vievacance/client/src/components/Forms/Signin.js\";\nimport React from 'react';\nimport { Formik, Form, Field } from 'formik'; // import Debug from '../../utils/Debug'\n// import * as Yup from \"yup\"\n\nimport axios from \"axios\";\nimport Input from './Input';\nimport { connect } from 'react-redux';\nimport { setSignedIn as _setSignedIn, errorCleared as _errorCleared, setViewer as _setViewer, setOwner as _setOwner } from '../../actions';\nimport './login.css';\n\nvar Signin = function Signin(_ref) {\n  var active = _ref.active,\n      err = _ref.err,\n      setSignedIn = _ref.setSignedIn,\n      errorCleared = _ref.errorCleared,\n      setViewer = _ref.setViewer,\n      setOwner = _ref.setOwner;\n  // console.log('err?: ' + err)\n  // console.log('active?:' + active)\n  return React.createElement(\"div\", {\n    style: {\n      display: active ? 'block' : 'none'\n    },\n    id: \"signin\",\n    className: \"box\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    className: \"title is-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 15\n    },\n    __self: this\n  }, \"Signin\"), React.createElement(Formik, {\n    initialValues: {\n      email: 'jasonli@mail.com',\n      password: 'Password1',\n      success: ''\n    },\n    onSubmit: function onSubmit(values, actions) {\n      errorCleared();\n      axios.post('/users/login', values).then(function (res) {\n        console.log(res);\n\n        if (res.status === 200) {\n          actions.setFieldValue('success', 'Success!');\n          setTimeout(function () {\n            setSignedIn(res.data._id);\n            setViewer(res.data._id);\n            setOwner(res.data);\n          }, 1500);\n        } else {\n          alert(res);\n        }\n      }).catch(function (err) {\n        if (err.response) {\n          actions.setErrors(err.response.data);\n        } else {\n          alert(err);\n        }\n      });\n      actions.setSubmitting(false);\n    },\n    render: function render(_ref2) {\n      var values = _ref2.values,\n          isSubmitting = _ref2.isSubmitting;\n      return React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, React.createElement(Field, {\n        name: \"email\",\n        component: Input,\n        type: \"email\",\n        placeholder: \"e.g. be@yonce.io\",\n        icons: {\n          left: 'envelope',\n          right: 'check'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }), React.createElement(Field, {\n        name: \"password\",\n        component: Input,\n        type: \"password\",\n        placeholder: \"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\",\n        icons: {\n          left: 'key',\n          right: 'check'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"button is-link\",\n        type: \"submit\",\n        disabled: isSubmitting,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, \"Submit\"), (err || values.success) && React.createElement(\"article\", {\n        className: err ? \"message is-danger is-small\" : \"message is-success is-small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"message-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, err ? 'Please login to view your profile' : values.success)));\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16\n    },\n    __self: this\n  }));\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    active: state.err.signin ? true : state.toggles.signin,\n    err: state.err.signin\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    setSignedIn: function setSignedIn(id) {\n      return dispatch(_setSignedIn(id));\n    },\n    errorCleared: function errorCleared() {\n      return dispatch(_errorCleared());\n    },\n    setViewer: function setViewer(id) {\n      return dispatch(_setViewer(id));\n    },\n    setOwner: function setOwner(id) {\n      return dispatch(_setOwner(id));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Signin);","map":{"version":3,"sources":["/Users/Overseer/Desktop/vievacance/client/src/components/Forms/Signin.js"],"names":["React","Formik","Form","Field","axios","Input","connect","setSignedIn","errorCleared","setViewer","setOwner","Signin","active","err","display","email","password","success","values","actions","post","then","res","console","log","status","setFieldValue","setTimeout","data","_id","alert","catch","response","setErrors","setSubmitting","isSubmitting","left","right","mapStateToProps","state","signin","toggles","mapDispatchToProps","dispatch","id"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Formik, Form, Field } from 'formik'\n// import Debug from '../../utils/Debug'\n// import * as Yup from \"yup\"\nimport axios from \"axios\"\nimport Input from './Input'\nimport { connect } from 'react-redux'\nimport { setSignedIn, errorCleared, setViewer, setOwner } from '../../actions'\nimport './login.css'\n\nconst Signin = ({ active, err, setSignedIn, errorCleared, setViewer, setOwner }) => {\n    // console.log('err?: ' + err)\n    // console.log('active?:' + active)\n    return <div style={{ display: active ? 'block' : 'none' }} id=\"signin\" className=\"box\">\n        <h1 className=\"title is-4\">Signin</h1>\n        <Formik\n            initialValues={{\n                email: 'jasonli@mail.com',\n                password: 'Password1',\n                success: ''\n            }}\n            onSubmit={(values, actions) => {\n                errorCleared()\n                axios.post('/users/login', values).then((res) => {\n                    console.log(res)\n                    if (res.status === 200) {\n                        actions.setFieldValue('success', 'Success!')\n                        setTimeout(() => {\n                            setSignedIn(res.data._id)\n                            setViewer(res.data._id)\n                            setOwner(res.data)\n                        }, 1500)\n                    } else {\n                        alert(res)\n                    }\n                }).catch((err) => {\n                    if (err.response) {\n                        actions.setErrors(err.response.data)\n                    } else {\n                        alert(err)\n                    }\n                })\n                actions.setSubmitting(false)\n            }\n            }\n\n            render={({ values, isSubmitting }) => (\n                <Form>\n                    <Field name=\"email\" component={Input} type=\"email\" placeholder=\"e.g. be@yonce.io\" icons={{ left: 'envelope', right: 'check' }} />\n                    <Field name=\"password\" component={Input} type=\"password\" placeholder=\"•••••••\" icons={{ left: 'key', right: 'check' }} />\n                    <button className=\"button is-link\" type=\"submit\" disabled={isSubmitting}>Submit</button>\n                    {(err || values.success) && <article className={err ? \"message is-danger is-small\" : \"message is-success is-small\"}>\n                        <div className=\"message-body\">\n                            {err ? 'Please login to view your profile' : values.success}\n                        </div>\n                    </article>}\n\n                    {/* <Debug /> */}\n                </Form>\n            )}\n        />\n    </div>\n}\n\nconst mapStateToProps = state => {\n    return {\n        active: state.err.signin ? true : state.toggles.signin,\n        err: state.err.signin\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setSignedIn: (id) => { return dispatch(setSignedIn(id)) },\n        errorCleared: () => { return dispatch(errorCleared()) },\n        setViewer: (id) => dispatch(setViewer(id)),\n        setOwner: (id) => dispatch(setOwner(id))\n    }\n}\n\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Signin)"]},"metadata":{},"sourceType":"module"}