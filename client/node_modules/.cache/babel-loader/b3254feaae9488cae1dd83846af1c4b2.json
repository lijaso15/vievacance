{"ast":null,"code":"import _objectSpread from \"/Users/Overseer/Desktop/vievacance/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/Overseer/Desktop/vievacance/client/src/routes/Profile/Profile-view.js\";\nimport React from 'react';\nimport Drawer from '../../components/Drawer';\nimport Footer from '../../components/Footer';\nimport NavbarOther from '../../components/Navbar/NavbarOther';\nimport { setSignedIn as _setSignedIn, setViewer as _setViewer, setOwner as _setOwner, loadData as _loadData, newSlide as _newSlide, setError as _setError } from '../../actions';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport Memento from '../../components/Cards/Mementos';\n\nvar ProfileView = function ProfileView(_ref) {\n  var setSignedIn = _ref.setSignedIn,\n      setOwner = _ref.setOwner,\n      setViewer = _ref.setViewer,\n      match = _ref.match,\n      fullAccess = _ref.fullAccess,\n      loadData = _ref.loadData,\n      newSlide = _ref.newSlide,\n      setError = _ref.setError,\n      wasCalled = _ref.wasCalled;\n\n  window.onload = function () {\n    function waitForUser(done) {\n      if (done) {\n        axios.get(\"/users/\".concat(match.params.id)).then(function (r) {\n          setSignedIn(done);\n          setViewer(done);\n          setOwner(r.data);\n        }).catch(function (err) {\n          return alert(err);\n        });\n        return;\n      }\n\n      axios.get('/users', {\n        withCredentials: true\n      }).then(function (res) {\n        // setSignedIn(res.data._id)\n        // setViewer(res.data._id)\n        waitForUser(res.data._id);\n      }).catch(function (err) {\n        return alert(err);\n      });\n    }\n\n    waitForUser(false);\n\n    if (!wasCalled) {\n      axios.get(\"/mementos/user/\".concat(match.params.id)).then(function (res) {\n        if (res.status === 200) {\n          res.data.map(function (mem) {\n            newSlide();\n            axios.get(\"/users/\".concat(mem.owner)).then(function (r) {\n              loadData(_objectSpread({}, mem, {\n                username: r.data.username,\n                profilePicture: r.data.profilePicture\n              }), 'MEMENTOS');\n            });\n          });\n        } else {\n          alert(res);\n        }\n      }).catch(function (err) {\n        return alert(err);\n      });\n    }\n\n    setError('ERR_PROFILE');\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, React.createElement(NavbarOther, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"columns\",\n    style: {\n      minHeight: '-webkit-fill-available',\n      paddingTop: '3.25rem'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(Drawer, {\n    location: \"/profile\",\n    fullAccess: fullAccess,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }), React.createElement(Memento, {\n    fullAccess: fullAccess,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"column is-1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, \" \")), React.createElement(Footer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }));\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  if (!state.perspective.owner._id) {\n    return {\n      wasCalled: state.err.profile,\n      fullAccess: true\n    };\n  } else {\n    return {\n      wasCalled: state.err.profile,\n      fullAccess: state.perspective.viewer === state.perspective.owner._id\n    };\n  }\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    setSignedIn: function setSignedIn(id) {\n      return dispatch(_setSignedIn(id));\n    },\n    setOwner: function setOwner(id) {\n      return dispatch(_setOwner(id));\n    },\n    setViewer: function setViewer(id) {\n      return dispatch(_setViewer(id));\n    },\n    loadData: function loadData(id, label) {\n      return dispatch(_loadData(id, label));\n    },\n    newSlide: function newSlide() {\n      return dispatch(_newSlide());\n    },\n    setError: function setError(label) {\n      return dispatch(_setError(label));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfileView);","map":{"version":3,"sources":["/Users/Overseer/Desktop/vievacance/client/src/routes/Profile/Profile-view.js"],"names":["React","Drawer","Footer","NavbarOther","setSignedIn","setViewer","setOwner","loadData","newSlide","setError","connect","axios","Memento","ProfileView","match","fullAccess","wasCalled","window","onload","waitForUser","done","get","params","id","then","r","data","catch","err","alert","withCredentials","res","_id","status","map","mem","owner","username","profilePicture","minHeight","paddingTop","mapStateToProps","state","perspective","profile","viewer","mapDispatchToProps","dispatch","label"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,OAAOC,WAAP,MAAwB,qCAAxB;AACA,SAASC,WAAW,IAAXA,YAAT,EAAsBC,SAAS,IAATA,UAAtB,EAAiCC,QAAQ,IAARA,SAAjC,EAA2CC,QAAQ,IAARA,SAA3C,EAAqDC,QAAQ,IAARA,SAArD,EAA+DC,QAAQ,IAARA,SAA/D,QAA+E,eAA/E;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,iCAApB;;AAIA,IAAMC,WAAW,GAAG,SAAdA,WAAc,OAAsG;AAAA,MAAnGT,WAAmG,QAAnGA,WAAmG;AAAA,MAAtFE,QAAsF,QAAtFA,QAAsF;AAAA,MAA5ED,SAA4E,QAA5EA,SAA4E;AAAA,MAAjES,KAAiE,QAAjEA,KAAiE;AAAA,MAA1DC,UAA0D,QAA1DA,UAA0D;AAAA,MAA9CR,QAA8C,QAA9CA,QAA8C;AAAA,MAApCC,QAAoC,QAApCA,QAAoC;AAAA,MAA1BC,QAA0B,QAA1BA,QAA0B;AAAA,MAAhBO,SAAgB,QAAhBA,SAAgB;;AAEtHC,EAAAA,MAAM,CAACC,MAAP,GAAgB,YAAM;AAElB,aAASC,WAAT,CAAqBC,IAArB,EAA2B;AACvB,UAAIA,IAAJ,EAAU;AACNT,QAAAA,KAAK,CAACU,GAAN,kBAAoBP,KAAK,CAACQ,MAAN,CAAaC,EAAjC,GAAuCC,IAAvC,CAA4C,UAAAC,CAAC,EAAI;AAC7CrB,UAAAA,WAAW,CAACgB,IAAD,CAAX;AACAf,UAAAA,SAAS,CAACe,IAAD,CAAT;AACAd,UAAAA,QAAQ,CAACmB,CAAC,CAACC,IAAH,CAAR;AACH,SAJD,EAIGC,KAJH,CAIS,UAAAC,GAAG;AAAA,iBAAIC,KAAK,CAACD,GAAD,CAAT;AAAA,SAJZ;AAKA;AACH;;AACDjB,MAAAA,KAAK,CAACU,GAAN,CAAU,QAAV,EAAoB;AAAES,QAAAA,eAAe,EAAE;AAAnB,OAApB,EAA+CN,IAA/C,CAAoD,UAAAO,GAAG,EAAI;AACvD;AACA;AACAZ,QAAAA,WAAW,CAACY,GAAG,CAACL,IAAJ,CAASM,GAAV,CAAX;AACH,OAJD,EAIGL,KAJH,CAIS,UAAAC,GAAG;AAAA,eAAIC,KAAK,CAACD,GAAD,CAAT;AAAA,OAJZ;AAKH;;AACDT,IAAAA,WAAW,CAAC,KAAD,CAAX;;AAEA,QAAI,CAACH,SAAL,EAAgB;AACZL,MAAAA,KAAK,CAACU,GAAN,0BAA4BP,KAAK,CAACQ,MAAN,CAAaC,EAAzC,GAA+CC,IAA/C,CAAoD,UAAAO,GAAG,EAAI;AACvD,YAAIA,GAAG,CAACE,MAAJ,KAAe,GAAnB,EAAwB;AACpBF,UAAAA,GAAG,CAACL,IAAJ,CAASQ,GAAT,CAAa,UAACC,GAAD,EAAS;AAClB3B,YAAAA,QAAQ;AACRG,YAAAA,KAAK,CAACU,GAAN,kBAAoBc,GAAG,CAACC,KAAxB,GAAiCZ,IAAjC,CAAsC,UAAAC,CAAC,EAAI;AACvClB,cAAAA,QAAQ,mBACD4B,GADC;AAEJE,gBAAAA,QAAQ,EAAEZ,CAAC,CAACC,IAAF,CAAOW,QAFb;AAGJC,gBAAAA,cAAc,EAAEb,CAAC,CAACC,IAAF,CAAOY;AAHnB,kBAIL,UAJK,CAAR;AAKH,aAND;AAOH,WATD;AAUH,SAXD,MAWO;AACHT,UAAAA,KAAK,CAACE,GAAD,CAAL;AACH;AACJ,OAfD,EAeGJ,KAfH,CAeS,UAAAC,GAAG;AAAA,eAAIC,KAAK,CAACD,GAAD,CAAT;AAAA,OAfZ;AAgBH;;AACDnB,IAAAA,QAAQ,CAAC,aAAD,CAAR;AACH,GAtCD;;AAwCA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI;AAAK,IAAA,SAAS,EAAC,SAAf;AACI,IAAA,KAAK,EAAE;AACH8B,MAAAA,SAAS,EAAE,wBADR;AAEHC,MAAAA,UAAU,EAAE;AAFT,KADX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKI,oBAAC,MAAD;AAAQ,IAAA,QAAQ,EAAC,UAAjB;AAA4B,IAAA,UAAU,EAAEzB,UAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALJ,EAMI,oBAAC,OAAD;AAAS,IAAA,UAAU,EAAEA,UAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANJ,EAOI;AAAK,IAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAPJ,CAFJ,EAYI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAZJ,CADJ;AAgBH,CA1DD;;AA4DA,IAAM0B,eAAe,GAAG,SAAlBA,eAAkB,CAAAC,KAAK,EAAI;AAC7B,MAAI,CAACA,KAAK,CAACC,WAAN,CAAkBP,KAAlB,CAAwBJ,GAA7B,EAAkC;AAC9B,WAAO;AACHhB,MAAAA,SAAS,EAAE0B,KAAK,CAACd,GAAN,CAAUgB,OADlB;AAEH7B,MAAAA,UAAU,EAAE;AAFT,KAAP;AAIH,GALD,MAKO;AACH,WAAO;AACHC,MAAAA,SAAS,EAAE0B,KAAK,CAACd,GAAN,CAAUgB,OADlB;AAEH7B,MAAAA,UAAU,EAAG2B,KAAK,CAACC,WAAN,CAAkBE,MAAlB,KAA6BH,KAAK,CAACC,WAAN,CAAkBP,KAAlB,CAAwBJ;AAF/D,KAAP;AAIH;AACJ,CAZD;;AAcA,IAAMc,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAC,QAAQ,EAAI;AACnC,SAAO;AACH3C,IAAAA,WAAW,EAAE,qBAAAmB,EAAE;AAAA,aAAIwB,QAAQ,CAAC3C,YAAW,CAACmB,EAAD,CAAZ,CAAZ;AAAA,KADZ;AAEHjB,IAAAA,QAAQ,EAAE,kBAAAiB,EAAE;AAAA,aAAIwB,QAAQ,CAACzC,SAAQ,CAACiB,EAAD,CAAT,CAAZ;AAAA,KAFT;AAGHlB,IAAAA,SAAS,EAAE,mBAAAkB,EAAE;AAAA,aAAIwB,QAAQ,CAAC1C,UAAS,CAACkB,EAAD,CAAV,CAAZ;AAAA,KAHV;AAIHhB,IAAAA,QAAQ,EAAE,kBAACgB,EAAD,EAAKyB,KAAL;AAAA,aAAeD,QAAQ,CAACxC,SAAQ,CAACgB,EAAD,EAAKyB,KAAL,CAAT,CAAvB;AAAA,KAJP;AAKHxC,IAAAA,QAAQ,EAAE;AAAA,aAAMuC,QAAQ,CAACvC,SAAQ,EAAT,CAAd;AAAA,KALP;AAMHC,IAAAA,QAAQ,EAAE,kBAACuC,KAAD;AAAA,aAAWD,QAAQ,CAACtC,SAAQ,CAACuC,KAAD,CAAT,CAAnB;AAAA;AANP,GAAP;AAQH,CATD;;AAWA,eAAetC,OAAO,CAAC+B,eAAD,EAAkBK,kBAAlB,CAAP,CAA6CjC,WAA7C,CAAf","sourcesContent":["import React from 'react'\nimport Drawer from '../../components/Drawer'\nimport Footer from '../../components/Footer'\nimport NavbarOther from '../../components/Navbar/NavbarOther'\nimport { setSignedIn, setViewer, setOwner, loadData, newSlide, setError } from '../../actions'\nimport { connect } from 'react-redux'\nimport axios from 'axios'\nimport Memento from '../../components/Cards/Mementos'\n\n\n\nconst ProfileView = ({ setSignedIn, setOwner, setViewer, match, fullAccess, loadData, newSlide, setError, wasCalled }) => {\n\n    window.onload = () => {\n\n        function waitForUser(done) {\n            if (done) {\n                axios.get(`/users/${match.params.id}`).then(r => {\n                    setSignedIn(done)\n                    setViewer(done)\n                    setOwner(r.data)\n                }).catch(err => alert(err))\n                return\n            }\n            axios.get('/users', { withCredentials: true }).then(res => {\n                // setSignedIn(res.data._id)\n                // setViewer(res.data._id)\n                waitForUser(res.data._id)\n            }).catch(err => alert(err))\n        }\n        waitForUser(false)\n\n        if (!wasCalled) {\n            axios.get(`/mementos/user/${match.params.id}`).then(res => {\n                if (res.status === 200) {\n                    res.data.map((mem) => {\n                        newSlide()\n                        axios.get(`/users/${mem.owner}`).then(r => {\n                            loadData({\n                                ...mem,\n                                username: r.data.username,\n                                profilePicture: r.data.profilePicture\n                            }, 'MEMENTOS')\n                        })\n                    })\n                } else {\n                    alert(res)\n                }\n            }).catch(err => alert(err))\n        }\n        setError('ERR_PROFILE')\n    }\n\n    return (\n        <div>\n            <NavbarOther />\n            <div className='columns'\n                style={{\n                    minHeight: '-webkit-fill-available',\n                    paddingTop: '3.25rem'\n                }}>\n                <Drawer location='/profile' fullAccess={fullAccess} />\n                <Memento fullAccess={fullAccess} />\n                <div className='column is-1'> </div>\n\n            </div>\n            <Footer />\n        </div>\n    )\n}\n\nconst mapStateToProps = state => {\n    if (!state.perspective.owner._id) {\n        return {\n            wasCalled: state.err.profile,\n            fullAccess: true\n        }\n    } else {\n        return {\n            wasCalled: state.err.profile,\n            fullAccess: (state.perspective.viewer === state.perspective.owner._id)\n        }\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setSignedIn: id => dispatch(setSignedIn(id)),\n        setOwner: id => dispatch(setOwner(id)),\n        setViewer: id => dispatch(setViewer(id)),\n        loadData: (id, label) => dispatch(loadData(id, label)),\n        newSlide: () => dispatch(newSlide()),\n        setError: (label) => dispatch(setError(label))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfileView)\n\n\n"]},"metadata":{},"sourceType":"module"}