{"ast":null,"code":"/**\r\n * Cone module.\r\n */\nimport * as tslib_1 from \"tslib\";\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\n\nimport { Container } from \"../../Container\";\nimport { Sprite, visualProperties } from \"../../Sprite\";\nimport { Ellipse } from \"../../elements/Ellipse\";\nimport { LinearGradientModifier } from \"../../rendering/fills/LinearGradientModifier\";\nimport { percent } from \"../../utils/Percent\";\nimport * as $object from \"../../utils/Object\";\nimport * as $path from \"../../rendering/Path\";\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\n\n/**\r\n * Builds a round cone/cylinder.\r\n *\r\n * @see {@link IConeEvents} for a list of available events\r\n * @see {@link IConeAdapters} for a list of available Adapters\r\n */\n\nvar Cone =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Cone, _super);\n  /**\r\n   * Constructor\r\n   */\n\n\n  function Cone() {\n    var _this = _super.call(this) || this;\n\n    _this.className = \"Cone\";\n    _this.angle = 30;\n    _this.radius = percent(100);\n    _this.topRadius = percent(100);\n    _this.top = _this.createChild(Ellipse);\n    _this.top.shouldClone = false;\n    _this.bottom = _this.createChild(Ellipse);\n    _this.bottom.shouldClone = false;\n    _this.body = _this.createChild(Sprite);\n    _this.body.shouldClone = false;\n\n    _this.body.setElement(_this.paper.add(\"path\"));\n\n    _this.layout = \"none\";\n    _this.bodyFillModifier = new LinearGradientModifier();\n    _this.bodyFillModifier.lightnesses = [0, -0.25, 0];\n    _this.body.fillModifier = _this.bodyFillModifier;\n\n    _this.applyTheme();\n\n    return _this;\n  }\n  /**\r\n   * Draws the element.\r\n   *\r\n   * @ignore Exclude from docs\r\n   */\n\n\n  Cone.prototype.draw = function () {\n    _super.prototype.draw.call(this);\n\n    $object.copyProperties(this, this.top, visualProperties);\n    $object.copyProperties(this, this.bottom, visualProperties);\n    $object.copyProperties(this, this.body, visualProperties);\n    var w = this.innerWidth;\n    var h = this.innerHeight;\n    var bottom = this.bottom;\n    var top = this.top;\n    var angle = this.angle;\n    var radiusBase;\n    var dx;\n    var dy;\n\n    if (this.orientation == \"horizontal\") {\n      radiusBase = h / 2;\n      bottom.y = h / 2;\n      top.y = h / 2;\n      top.x = w;\n      dx = (90 - angle) / 90;\n      dy = 0;\n      this.bodyFillModifier.gradient.rotation = 90;\n    } else {\n      dx = 0;\n      dy = (90 - angle) / 90;\n      radiusBase = w / 2;\n      bottom.y = h;\n      bottom.x = w / 2;\n      top.x = w / 2;\n      this.bodyFillModifier.gradient.rotation = 0;\n    }\n\n    var radius = this.radius.value * radiusBase;\n    var topRadius = this.topRadius.value * radiusBase;\n    bottom.radius = radius - radius * dx;\n    bottom.radiusY = radius - radius * dy;\n    top.radius = topRadius - topRadius * dx;\n    top.radiusY = topRadius - topRadius * dy;\n    var path;\n\n    if (this.orientation == \"horizontal\") {\n      path = $path.moveTo({\n        x: 0,\n        y: h / 2 - bottom.radiusY\n      }) + $path.arcTo(-90, -180, bottom.radius, bottom.radiusY) + $path.lineTo({\n        x: w,\n        y: h / 2 + top.radiusY\n      }) + $path.arcTo(90, 180, top.radius, top.radiusY) + $path.closePath();\n    } else {\n      path = $path.moveTo({\n        x: w / 2 - top.radius,\n        y: 0\n      }) + $path.arcTo(180, -180, top.radius, top.radiusY) + $path.lineTo({\n        x: w / 2 + bottom.radius,\n        y: h\n      }) + $path.arcTo(0, 180, bottom.radius, bottom.radiusY) + $path.closePath();\n    }\n\n    this.body.path = path;\n  };\n\n  Object.defineProperty(Cone.prototype, \"angle\", {\n    /**\r\n     * @return Angle\r\n     */\n    get: function () {\n      return this.getPropertyValue(\"angle\");\n    },\n\n    /**\r\n     * Angle of the point of view to the 3D element. (0-360)\r\n     *\r\n     * @default 30\r\n     * @param value  Angle\r\n     */\n    set: function (value) {\n      this.setPropertyValue(\"angle\", value, true);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Cone.prototype, \"radius\", {\n    /**\r\n     * @return Bottom radius\r\n     */\n    get: function () {\n      return this.getPropertyValue(\"radius\");\n    },\n\n    /**\r\n     * A relative radius of the cone's bottom (base).\r\n     *\r\n     * It is relevant to the inner width or height of the element.\r\n     *\r\n     * @default Percent(100)\r\n     * @param value  Bottom radius\r\n     */\n    set: function (value) {\n      this.setPropertyValue(\"radius\", value, true);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Cone.prototype, \"topRadius\", {\n    /**\r\n     * @return Top radius\r\n     */\n    get: function () {\n      return this.getPropertyValue(\"topRadius\");\n    },\n\n    /**\r\n     * A relative radius of the cone's top (tip).\r\n     *\r\n     * It is relevant to the inner width or height of the element.\r\n     *\r\n     * @default Percent(0)\r\n     * @param value  Top radius\r\n     */\n    set: function (value) {\n      this.setPropertyValue(\"topRadius\", value, true);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Cone.prototype, \"orientation\", {\n    /**\r\n     * Orientation\r\n     */\n    get: function () {\n      return this.getPropertyValue(\"orientation\");\n    },\n\n    /**\r\n     * Orientation of the cone\r\n     *\r\n     * @default \"vertical\"\r\n     * @param value  Orientation\r\n     */\n    set: function (value) {\n      this.setPropertyValue(\"orientation\", value, true);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return Cone;\n}(Container);\n\nexport { Cone };","map":null,"metadata":{},"sourceType":"module"}