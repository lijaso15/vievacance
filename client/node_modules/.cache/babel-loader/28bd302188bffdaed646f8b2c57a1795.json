{"ast":null,"code":"import _objectSpread from \"/Users/Overseer/Desktop/vievacance/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/Users/Overseer/Desktop/vievacance/client/src/routes/Profile/Profile-view.js\";\nimport React from \"react\";\nimport Drawer from \"../../components/Drawer\";\nimport Footer from \"../../components/Footer\";\nimport NavbarOther from \"../../components/Navbar/NavbarOther\";\nimport { setSignedIn as _setSignedIn, setViewer as _setViewer, setOwner as _setOwner, loadData as _loadData, newSlide as _newSlide, setError as _setError } from \"../../actions\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\nimport Memento from \"../../components/Cards/Mementos\";\n\nvar ProfileView = function ProfileView(_ref) {\n  var setSignedIn = _ref.setSignedIn,\n      setOwner = _ref.setOwner,\n      setViewer = _ref.setViewer,\n      match = _ref.match,\n      fullAccess = _ref.fullAccess,\n      loadData = _ref.loadData,\n      newSlide = _ref.newSlide,\n      setError = _ref.setError,\n      wasCalled = _ref.wasCalled;\n\n  window.onload = function () {\n    function waitForUser(done) {\n      if (done) {\n        axios.get(\"/users/\".concat(match.params.id)).then(function (r) {\n          setSignedIn(done);\n          setViewer(done);\n          setOwner(r.data);\n          axios.get(\"/globeData\").then(function (res) {\n            loadData(res.data.map(function (c) {\n              return {\n                city: c.city,\n                country: c.country\n              };\n            }), \"CITIES\");\n          }).catch(function (err) {\n            return alert(err);\n          });\n          axios.get(\"/photos/\".concat(match.params.id)).then(function (res) {\n            loadData(res.data, \"PHOTOS\");\n          });\n        }).catch(function (err) {\n          return alert(err);\n        });\n        return;\n      }\n\n      axios.get(\"/users\", {\n        withCredentials: true\n      }).then(function (res) {\n        // setSignedIn(res.data._id)\n        // setViewer(res.data._id)\n        waitForUser(res.data._id);\n      }).catch(function (err) {\n        return alert(err);\n      });\n    }\n\n    if (!wasCalled) {\n      waitForUser(false);\n      axios.get(\"/mementos/user/\".concat(match.params.id)).then(function (res) {\n        if (res.status === 200) {\n          res.data.map(function (mem) {\n            newSlide();\n            axios.get(\"/users/\".concat(mem.owner)).then(function (r) {\n              loadData(_objectSpread({}, mem, {\n                username: r.data.username,\n                profilePicture: r.data.profilePicture\n              }), \"MEMENTOS\");\n            });\n          });\n        } else {\n          alert(res);\n        }\n      }).catch(function (err) {\n        return alert(err);\n      });\n    }\n\n    setError(\"ERR_PROFILE\");\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, React.createElement(NavbarOther, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"columns\",\n    style: {\n      minHeight: \"-webkit-fill-available\",\n      paddingTop: \"3.25rem\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, React.createElement(Drawer, {\n    location: \"/profile\",\n    fullAccess: fullAccess,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }), React.createElement(Memento, {\n    fullAccess: fullAccess,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"column is-1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, \" \")), React.createElement(Footer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }));\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  if (!state.perspective.owner._id) {\n    return {\n      wasCalled: state.err.profile,\n      fullAccess: true\n    };\n  } else {\n    return {\n      wasCalled: state.err.profile,\n      fullAccess: state.perspective.viewer === state.perspective.owner._id\n    };\n  }\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    setSignedIn: function setSignedIn(id) {\n      return dispatch(_setSignedIn(id));\n    },\n    setOwner: function setOwner(id) {\n      return dispatch(_setOwner(id));\n    },\n    setViewer: function setViewer(id) {\n      return dispatch(_setViewer(id));\n    },\n    loadData: function loadData(id, label) {\n      return dispatch(_loadData(id, label));\n    },\n    newSlide: function newSlide() {\n      return dispatch(_newSlide());\n    },\n    setError: function setError(label) {\n      return dispatch(_setError(label));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfileView);","map":{"version":3,"sources":["/Users/Overseer/Desktop/vievacance/client/src/routes/Profile/Profile-view.js"],"names":["React","Drawer","Footer","NavbarOther","setSignedIn","setViewer","setOwner","loadData","newSlide","setError","connect","axios","Memento","ProfileView","match","fullAccess","wasCalled","window","onload","waitForUser","done","get","params","id","then","r","data","res","map","c","city","country","catch","err","alert","withCredentials","_id","status","mem","owner","username","profilePicture","minHeight","paddingTop","mapStateToProps","state","perspective","profile","viewer","mapDispatchToProps","dispatch","label"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Drawer from \"../../components/Drawer\";\nimport Footer from \"../../components/Footer\";\nimport NavbarOther from \"../../components/Navbar/NavbarOther\";\nimport {\n  setSignedIn,\n  setViewer,\n  setOwner,\n  loadData,\n  newSlide,\n  setError\n} from \"../../actions\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\nimport Memento from \"../../components/Cards/Mementos\";\n\nconst ProfileView = ({\n  setSignedIn,\n  setOwner,\n  setViewer,\n  match,\n  fullAccess,\n  loadData,\n  newSlide,\n  setError,\n  wasCalled\n}) => {\n  window.onload = () => {\n    function waitForUser(done) {\n      if (done) {\n        axios\n          .get(`/users/${match.params.id}`)\n          .then(r => {\n            setSignedIn(done);\n            setViewer(done);\n            setOwner(r.data);\n            axios\n              .get(`/globeData`)\n              .then(res => {\n                loadData(\n                  res.data.map(c => {\n                    return {\n                      city: c.city,\n                      country: c.country\n                    };\n                  }),\n                  \"CITIES\"\n                );\n              })\n              .catch(err => alert(err));\n\n            axios.get(`/photos/${match.params.id}`).then(res => {\n              loadData(res.data, \"PHOTOS\");\n            });\n          })\n          .catch(err => alert(err));\n        return;\n      }\n      axios\n        .get(\"/users\", { withCredentials: true })\n        .then(res => {\n          // setSignedIn(res.data._id)\n          // setViewer(res.data._id)\n          waitForUser(res.data._id);\n        })\n        .catch(err => alert(err));\n    }\n\n    if (!wasCalled) {\n      waitForUser(false);\n      axios\n        .get(`/mementos/user/${match.params.id}`)\n        .then(res => {\n          if (res.status === 200) {\n            res.data.map(mem => {\n              newSlide();\n              axios.get(`/users/${mem.owner}`).then(r => {\n                loadData(\n                  {\n                    ...mem,\n                    username: r.data.username,\n                    profilePicture: r.data.profilePicture\n                  },\n                  \"MEMENTOS\"\n                );\n              });\n            });\n          } else {\n            alert(res);\n          }\n        })\n        .catch(err => alert(err));\n    }\n    setError(\"ERR_PROFILE\");\n  };\n\n  return (\n    <div>\n      <NavbarOther />\n      <div\n        className=\"columns\"\n        style={{\n          minHeight: \"-webkit-fill-available\",\n          paddingTop: \"3.25rem\"\n        }}\n      >\n        <Drawer location=\"/profile\" fullAccess={fullAccess} />\n        <Memento fullAccess={fullAccess} />\n        <div className=\"column is-1\"> </div>\n      </div>\n      <Footer />\n    </div>\n  );\n};\n\nconst mapStateToProps = state => {\n  if (!state.perspective.owner._id) {\n    return {\n      wasCalled: state.err.profile,\n      fullAccess: true\n    };\n  } else {\n    return {\n      wasCalled: state.err.profile,\n      fullAccess: state.perspective.viewer === state.perspective.owner._id\n    };\n  }\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setSignedIn: id => dispatch(setSignedIn(id)),\n    setOwner: id => dispatch(setOwner(id)),\n    setViewer: id => dispatch(setViewer(id)),\n    loadData: (id, label) => dispatch(loadData(id, label)),\n    newSlide: () => dispatch(newSlide()),\n    setError: label => dispatch(setError(label))\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ProfileView);\n"]},"metadata":{},"sourceType":"module"}