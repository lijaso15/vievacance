{"ast":null,"code":"import * as $array from \"./Array\";\n/**\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\n\nexport function fromArray(array) {\n  return function (push) {\n    var length = array.length;\n\n    for (var i = 0; i < length; ++i) {\n      if (!push(array[i])) {\n        break;\n      }\n    }\n  };\n}\n/**\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\n\nexport function length(iter) {\n  var sum = 0;\n  iter(function (_) {\n    ++sum;\n    return true;\n  });\n  return sum;\n}\n/**\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\n\nexport function toArray(iter) {\n  var output = [];\n  iter(function (value) {\n    output.push(value);\n    return true;\n  });\n  return output;\n}\n/**\r\n * [iter description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\n\nexport function eachContinue(iter, fn) {\n  iter(fn);\n}\n/**\r\n * [iter description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\n\nexport function each(iter, fn) {\n  iter(function (value) {\n    fn(value);\n    return true;\n  });\n}\n/**\r\n * [iter description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\n\nexport function sort(iter, fn) {\n  return fromArray(toArray(iter).sort(fn));\n}\n/**\r\n * [A description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\n\nexport function map(iter, fn) {\n  return function (push) {\n    return iter(function (value) {\n      return push(fn(value));\n    });\n  };\n}\n/**\r\n * [iter description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\n\nexport function filter(iter, fn) {\n  return function (push) {\n    return iter(function (value) {\n      if (fn(value)) {\n        return push(value);\n      } else {\n        return true;\n      }\n    });\n  };\n}\n/**\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\n\nexport function concat() {\n  var args = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    args[_i] = arguments[_i];\n  }\n\n  return function (push) {\n    var go = true;\n\n    var push2 = function (value) {\n      return go = push(value);\n    };\n\n    var length = args.length;\n\n    for (var i = 0; i < length; ++i) {\n      args[i](push2);\n\n      if (!go) {\n        break;\n      }\n    }\n  };\n}\n/**\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\n\nexport function flatten(iter) {\n  return function (push) {\n    var go = true;\n\n    var push2 = function (value) {\n      return go = push(value);\n    };\n\n    iter(function (value) {\n      value(push2);\n      return go;\n    });\n  };\n}\n/**\r\n * [number description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\n\nexport function indexed(iter) {\n  return function (push) {\n    var index = 0;\n    iter(function (value) {\n      return push([index++, value]);\n    });\n  };\n}\n/**\r\n * [iter description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\n\nexport function findIndex(iter, matches) {\n  var found = false;\n  var i = 0;\n  iter(function (value) {\n    if (matches(value)) {\n      found = true;\n      return false;\n    } else {\n      ++i;\n      return true;\n    }\n  });\n  return found ? i : -1;\n}\n/**\r\n * [iter description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\n\nexport function find(iter, matches) {\n  var output;\n  iter(function (value) {\n    if (matches(value)) {\n      output = value;\n      return false;\n    } else {\n      return true;\n    }\n  });\n  return output;\n}\n/**\r\n * [A description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\n\nexport function findMap(iter, matches) {\n  var output;\n  iter(function (value) {\n    var v = matches(value);\n\n    if (v !== null) {\n      output = v;\n      return false;\n    } else {\n      return true;\n    }\n  });\n  return output;\n}\n/**\r\n * [iter description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\n\nexport function contains(iter, matches) {\n  var output = false;\n  iter(function (value) {\n    if (matches(value)) {\n      output = true;\n      return false;\n    } else {\n      return true;\n    }\n  });\n  return output;\n}\n/**\r\n * [A description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\n\nexport function foldl(iter, init, fn) {\n  iter(function (value) {\n    init = fn(init, value);\n    return true;\n  });\n  return init;\n}\n/**\r\n * [min2 description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param left [description]\r\n * @param right [description]\r\n * @return [description]\r\n */\n\nfunction min2(left, right) {\n  if (left == null || right < left) {\n    return right;\n  } else {\n    return left;\n  }\n}\n/**\r\n * [min description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Verify that this works correctly\r\n * @todo Description\r\n * @param a [description]\r\n * @return [description]\r\n */\n\n\nexport function min(a) {\n  return foldl(a, null, min2);\n}\n/**\r\n * [max2 description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param left [description]\r\n * @param right [description]\r\n * @return [description]\r\n */\n\nfunction max2(left, right) {\n  if (left == null || right > left) {\n    return right;\n  } else {\n    return left;\n  }\n}\n/**\r\n * [max description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Verify that this works correctly\r\n * @todo Description\r\n * @param a [description]\r\n * @return [description]\r\n */\n\n\nexport function max(a) {\n  return foldl(a, null, max2);\n}\n/**\r\n * [join description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param iter [description]\r\n * @param separator [description]\r\n * @return [description]\r\n */\n\nexport function join(iter, separator) {\n  if (separator === void 0) {\n    separator = \"\";\n  }\n\n  var first = true;\n  var init = \"\";\n  iter(function (value) {\n    if (first) {\n      first = false;\n    } else {\n      init += separator;\n    }\n\n    init += value;\n    return true;\n  });\n  return init;\n}\n/**\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\n\nvar ListIterator =\n/** @class */\nfunction () {\n  /**\r\n   * Constructor\r\n   *\r\n   * @param list [description]\r\n   * @param create [description]\r\n   */\n  function ListIterator(list, create) {\n    // flag specifies if iterator should create new list item if it is reqested for a nextItem but there is no more left in the list\n    this.createNewItems = false;\n    this.list = list;\n    this._create = create;\n    this.reset();\n  }\n\n  ListIterator.prototype.reset = function () {\n    this._listCopy = toArray(this.list.iterator());\n  };\n\n  ListIterator.prototype.clear = function () {\n    this._listCopy.length = 0;\n  };\n\n  ListIterator.prototype.getFirst = function () {\n    return this.returnItem(0);\n  };\n\n  ListIterator.prototype.getLast = function () {\n    return this.returnItem(this._listCopy.length - 1);\n  };\n\n  ListIterator.prototype.find = function (fn) {\n    var index = $array.findIndex(this._listCopy, fn);\n\n    if (index !== -1) {\n      var item = this._listCopy[index]; // TODO use removeIndex instead ?\n\n      $array.remove(this._listCopy, item);\n      return item;\n    } else {\n      return this.getLast();\n    }\n  };\n\n  ListIterator.prototype.removeItem = function (item) {\n    return $array.remove(this._listCopy, item);\n  };\n\n  ListIterator.prototype.returnItem = function (index) {\n    if (index >= 0 && index < this._listCopy.length) {\n      var item = this._listCopy[index]; // TODO use removeIndex instead ?\n\n      $array.remove(this._listCopy, item);\n      return item;\n    } else if (this.createNewItems) {\n      return this._create();\n    }\n  };\n\n  ListIterator.prototype.iterator = function () {\n    return fromArray(this._listCopy);\n  };\n\n  return ListIterator;\n}();\n\nexport { ListIterator };","map":null,"metadata":{},"sourceType":"module"}