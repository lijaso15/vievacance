{"ast":null,"code":"var _jsxFileName = \"/Users/Overseer/Desktop/vievacance/client/src/routes/City/City-view.js\";\nimport React from 'react';\nimport axios from 'axios'; // import 'bulma/css/bulma.css'\n\nimport NavbarOther from '../../components/Navbar/NavbarOther';\nimport Banner from '../../components/Banners/Banner/';\nimport { connect } from 'react-redux';\nimport { loadData as _loadData, setSignedIn as _setSignedIn, setViewer as _setViewer, newSlide as _newSlide } from '../../actions';\nimport Content from '../../components/Content';\nimport Footer from '../../components/Footer';\nimport Memento from '../../components/Cards/Mementos';\n\nvar City = function City(_ref) {\n  var loadData = _ref.loadData,\n      match = _ref.match,\n      setSignedIn = _ref.setSignedIn,\n      setViewer = _ref.setViewer,\n      newSlide = _ref.newSlide;\n\n  window.onload = function () {\n    function waitForUser(done) {\n      if (done) {\n        setSignedIn(done);\n        setViewer(done);\n        return;\n      }\n\n      axios.get('/users', {\n        withCredentials: true\n      }).then(function (res) {\n        // setSignedIn(res.data._id)\n        // setViewer(res.data._id)\n        waitForUser(res.data._id);\n      }).catch(function (err) {\n        return alert(err);\n      });\n    }\n\n    waitForUser(false);\n    axios.get(\"/globeData/\".concat(match.params.id)).then(function (res) {\n      loadData(res.data, 'CITY');\n    }).catch(function (err) {\n      return alert(err);\n    });\n    axios.get(\"/mementos/city/\".concat(match.params.id)).then(function (res) {\n      if (res.status === 200) {\n        res.data.map(function () {\n          return newSlide();\n        });\n        loadData(res.data, 'MEMENTOS');\n      } else {\n        alert(res);\n      }\n    }).catch(function (err) {\n      alert(err);\n    });\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, React.createElement(NavbarOther, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }), React.createElement(Banner, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }), React.createElement(Content, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }), React.createElement(Memento, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }), React.createElement(Footer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }));\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    setSignedIn: function setSignedIn(id) {\n      return dispatch(_setSignedIn(id));\n    },\n    loadData: function loadData(id, label) {\n      return dispatch(_loadData(id, label));\n    },\n    setViewer: function setViewer(id) {\n      return dispatch(_setViewer(id));\n    },\n    newSlide: function newSlide() {\n      return dispatch(_newSlide());\n    }\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(City);","map":{"version":3,"sources":["/Users/Overseer/Desktop/vievacance/client/src/routes/City/City-view.js"],"names":["React","axios","NavbarOther","Banner","connect","loadData","setSignedIn","setViewer","newSlide","Content","Footer","Memento","City","match","window","onload","waitForUser","done","get","withCredentials","then","res","data","_id","catch","err","alert","params","id","status","map","mapDispatchToProps","dispatch","label"],"mappings":"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","sourcesContent":["import React from 'react'\nimport axios from 'axios'\n// import 'bulma/css/bulma.css'\nimport NavbarOther from '../../components/Navbar/NavbarOther'\nimport Banner from '../../components/Banners/Banner/'\nimport { connect } from 'react-redux'\nimport { loadData, setSignedIn, setViewer, newSlide } from '../../actions'\nimport Content from '../../components/Content'\nimport Footer from '../../components/Footer'\nimport Memento from '../../components/Cards/Mementos'\n\n\nconst City = ({ loadData, match, setSignedIn, setViewer, newSlide }) => {\n\n    window.onload = () => {\n\n        function waitForUser(done) {\n            if (done) {\n                setSignedIn(done)\n                setViewer(done)\n                return\n            }\n            axios.get('/users', { withCredentials: true }).then(res => {\n                // setSignedIn(res.data._id)\n                // setViewer(res.data._id)\n                waitForUser(res.data._id)\n            }).catch(err => alert(err))\n        }\n        waitForUser(false)\n\n        axios.get(`/globeData/${match.params.id}`).then(res => {\n            loadData(res.data, 'CITY')\n        }).catch(err => alert(err))\n\n        axios.get(`/mementos/city/${match.params.id}`).then(res => {\n            if (res.status === 200) {\n                res.data.map(() => newSlide())\n                loadData(res.data, 'MEMENTOS')\n            } else {\n                alert(res)\n            }\n        }).catch(err => {\n            alert(err)\n        }\n        )\n    }\n\n\n    return (<div>\n        <NavbarOther />\n        <Banner />\n        <Content />\n        <Memento />\n        <Footer />\n    </div>)\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setSignedIn: (id) => dispatch(setSignedIn(id)),\n        loadData: (id, label) => dispatch(loadData(id, label)),\n        setViewer: id => dispatch(setViewer(id)),\n        newSlide: () => dispatch(newSlide())\n    }\n}\n\nexport default connect(null, mapDispatchToProps)(City)"]},"metadata":{},"sourceType":"module"}