{"ast":null,"code":"var _jsxFileName = \"/Users/Overseer/Desktop/vievacance/client/src/routes/City/City-view.js\";\nimport React from \"react\";\nimport axios from \"axios\"; // import 'bulma/css/bulma.css'\n\nimport NavbarOther from \"../../components/Navbar/NavbarOther\";\nimport Banner from \"../../components/Banners/Banner/\";\nimport { connect } from \"react-redux\";\nimport { loadData as _loadData, setSignedIn as _setSignedIn, setViewer as _setViewer, newSlide as _newSlide } from \"../../actions\";\nimport Content from \"../../components/Content\";\nimport Footer from \"../../components/Footer\";\nimport Memento from \"../../components/Cards/Mementos\";\n\nvar City = function City(_ref) {\n  var loadData = _ref.loadData,\n      match = _ref.match,\n      setSignedIn = _ref.setSignedIn,\n      setViewer = _ref.setViewer,\n      newSlide = _ref.newSlide;\n\n  window.onload = function () {\n    axios.get(\"/globeData/\".concat(match.params.id)).then(function (res) {\n      loadData(res.data, \"CITY\");\n    }).catch(function (err) {\n      return alert(err);\n    });\n    axios.get(\"/mementos/city/\".concat(match.params.id)).then(function (res) {\n      if (res.status === 200) {\n        res.data.map(function () {\n          return newSlide();\n        });\n        loadData(res.data, \"MEMENTOS\");\n      } else {\n        alert(res);\n      }\n    }).catch(function (err) {\n      alert(err);\n    });\n\n    function waitForUser(done) {\n      if (done) {\n        setSignedIn(done);\n        setViewer(done);\n        return;\n      }\n\n      axios.get(\"/users\", {\n        withCredentials: true\n      }).then(function (res) {\n        // setSignedIn(res.data._id)\n        // setViewer(res.data._id)\n        waitForUser(res.data._id);\n      }).catch(function (err) {\n        return alert(err);\n      });\n    }\n\n    waitForUser(false);\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, React.createElement(NavbarOther, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }), React.createElement(Banner, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }), React.createElement(Content, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }), React.createElement(Memento, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }), React.createElement(Footer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }));\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    setSignedIn: function setSignedIn(id) {\n      return dispatch(_setSignedIn(id));\n    },\n    loadData: function loadData(id, label) {\n      return dispatch(_loadData(id, label));\n    },\n    setViewer: function setViewer(id) {\n      return dispatch(_setViewer(id));\n    },\n    newSlide: function newSlide() {\n      return dispatch(_newSlide());\n    }\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(City);","map":{"version":3,"sources":["/Users/Overseer/Desktop/vievacance/client/src/routes/City/City-view.js"],"names":["React","axios","NavbarOther","Banner","connect","loadData","setSignedIn","setViewer","newSlide","Content","Footer","Memento","City","match","window","onload","get","params","id","then","res","data","catch","err","alert","status","map","waitForUser","done","withCredentials","_id","mapDispatchToProps","dispatch","label"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\n// import 'bulma/css/bulma.css'\nimport NavbarOther from \"../../components/Navbar/NavbarOther\";\nimport Banner from \"../../components/Banners/Banner/\";\nimport { connect } from \"react-redux\";\nimport { loadData, setSignedIn, setViewer, newSlide } from \"../../actions\";\nimport Content from \"../../components/Content\";\nimport Footer from \"../../components/Footer\";\nimport Memento from \"../../components/Cards/Mementos\";\n\nconst City = ({ loadData, match, setSignedIn, setViewer, newSlide }) => {\n  window.onload = () => {\n    axios\n      .get(`/globeData/${match.params.id}`)\n      .then(res => {\n        loadData(res.data, \"CITY\");\n      })\n      .catch(err => alert(err));\n\n    axios\n      .get(`/mementos/city/${match.params.id}`)\n      .then(res => {\n        if (res.status === 200) {\n          res.data.map(() => newSlide());\n          loadData(res.data, \"MEMENTOS\");\n        } else {\n          alert(res);\n        }\n      })\n      .catch(err => {\n        alert(err);\n      });\n    function waitForUser(done) {\n      if (done) {\n        setSignedIn(done);\n        setViewer(done);\n        return;\n      }\n      axios\n        .get(\"/users\", { withCredentials: true })\n        .then(res => {\n          // setSignedIn(res.data._id)\n          // setViewer(res.data._id)\n          waitForUser(res.data._id);\n        })\n        .catch(err => alert(err));\n    }\n    waitForUser(false);\n  };\n\n  return (\n    <div>\n      <NavbarOther />\n      <Banner />\n      <Content />\n      <Memento />\n      <Footer />\n    </div>\n  );\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setSignedIn: id => dispatch(setSignedIn(id)),\n    loadData: (id, label) => dispatch(loadData(id, label)),\n    setViewer: id => dispatch(setViewer(id)),\n    newSlide: () => dispatch(newSlide())\n  };\n};\n\nexport default connect(\n  null,\n  mapDispatchToProps\n)(City);\n"]},"metadata":{},"sourceType":"module"}