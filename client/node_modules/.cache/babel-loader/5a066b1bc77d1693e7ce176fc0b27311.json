{"ast":null,"code":"var _jsxFileName = \"/Users/Overseer/Desktop/vievacance/client/src/routes/Mementos/Mementos-view.js\";\nimport React from 'react';\nimport NavbarOther from '../../components/Navbar/NavbarOther';\nimport Drawer from '../../components/Drawer';\nimport Footer from '../../components/Footer';\nimport CreateMementos from '../../components/ManageMementos/CreateMementos';\nimport axios from 'axios';\nimport { setSignedIn as _setSignedIn, setViewer as _setViewer, setOwner as _setOwner, loadData as _loadData } from '../../actions';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\n\nvar MementosView = function MementosView(_ref) {\n  var setSignedIn = _ref.setSignedIn,\n      setOwner = _ref.setOwner,\n      setViewer = _ref.setViewer,\n      match = _ref.match,\n      loadData = _ref.loadData,\n      access = _ref.access;\n\n  window.onload = function () {\n    function waitForUser(done) {\n      if (done) {\n        setSignedIn(done);\n        setViewer(done);\n        axios.get(\"/users/\".concat(match.params.id)).then(function (res) {\n          setOwner(res.data);\n        }).catch(function (err) {\n          return alert(err);\n        });\n        return;\n      }\n\n      axios.get('/users', {\n        withCredentials: true\n      }).then(function (res) {\n        // setSignedIn(res.data._id)\n        // setViewer(res.data._id)\n        waitForUser(res.data._id);\n      }).catch(function (err) {\n        return alert(err);\n      });\n    }\n\n    waitForUser(false);\n    axios.get(\"/globeData\").then(function (res) {\n      loadData(res.data.map(function (c) {\n        return {\n          city: c.city,\n          country: c.country\n        };\n      }), 'CITIES');\n    }).catch(function (err) {\n      return alert(err);\n    });\n    axios.get(\"/photos/\".concat(match.params.id)).then(function (res) {\n      loadData(res.data, 'PHOTOS');\n    });\n  };\n\n  if (!access) {\n    return React.createElement(Redirect, {\n      to: \"/homeglobe\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    });\n  }\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, React.createElement(NavbarOther, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"columns\",\n    style: {\n      minHeight: '-webkit-fill-available',\n      paddingTop: '3.25rem'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, React.createElement(Drawer, {\n    location: \"/mementos\",\n    fullAccess: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }), React.createElement(CreateMementos, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  })), React.createElement(Footer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }));\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  if (!state.perspective.owner._id) {\n    return {\n      access: true\n    };\n  } else {\n    return {\n      access: state.perspective.viewer === state.perspective.owner._id\n    };\n  }\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    setSignedIn: function setSignedIn(id) {\n      return dispatch(_setSignedIn(id));\n    },\n    setOwner: function setOwner(id) {\n      return dispatch(_setOwner(id));\n    },\n    setViewer: function setViewer(id) {\n      return dispatch(_setViewer(id));\n    },\n    loadData: function loadData(id, label) {\n      return dispatch(_loadData(id, label));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MementosView);","map":{"version":3,"sources":["/Users/Overseer/Desktop/vievacance/client/src/routes/Mementos/Mementos-view.js"],"names":["React","NavbarOther","Drawer","Footer","CreateMementos","axios","setSignedIn","setViewer","setOwner","loadData","connect","Redirect","MementosView","match","access","window","onload","waitForUser","done","get","params","id","then","res","data","catch","err","alert","withCredentials","_id","map","c","city","country","minHeight","paddingTop","mapStateToProps","state","perspective","owner","viewer","mapDispatchToProps","dispatch","label"],"mappings":"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","sourcesContent":["import React from 'react'\nimport NavbarOther from '../../components/Navbar/NavbarOther'\nimport Drawer from '../../components/Drawer'\nimport Footer from '../../components/Footer'\nimport CreateMementos from '../../components/ManageMementos/CreateMementos'\nimport axios from 'axios'\nimport { setSignedIn, setViewer, setOwner, loadData } from '../../actions'\nimport { connect } from 'react-redux'\nimport { Redirect } from 'react-router-dom'\n\n\nconst MementosView = ({ setSignedIn, setOwner, setViewer, match, loadData, access }) => {\n\n    window.onload = () => {\n        function waitForUser(done) {\n            if (done) {\n                setSignedIn(done)\n                setViewer(done)\n                axios.get(`/users/${match.params.id}`).then(res => {\n                    setOwner(res.data)\n                }).catch(err => alert(err))\n                return\n            }\n            axios.get('/users', { withCredentials: true }).then(res => {\n                // setSignedIn(res.data._id)\n                // setViewer(res.data._id)\n                waitForUser(res.data._id)\n            }).catch(err => alert(err))\n        }\n        waitForUser(false)\n\n        axios.get(`/globeData`).then(res => {\n            loadData(res.data.map(c => {\n                return {\n                    city: c.city,\n                    country: c.country\n                }\n            }), 'CITIES')\n        }).catch(err => alert(err))\n\n        axios.get(`/photos/${match.params.id}`).then(res => {\n            loadData(res.data, 'PHOTOS')\n        })\n    }\n    if (!access) {\n        return <Redirect to=\"/homeglobe\" />\n    }\n\n    return (\n        <div>\n            <NavbarOther />\n            <div className='columns'\n                style={{\n                    minHeight: '-webkit-fill-available',\n                    paddingTop: '3.25rem'\n                }}>\n                <Drawer location='/mementos' fullAccess />\n                <CreateMementos />\n            </div>\n            <Footer />\n        </div>\n    )\n}\n\nconst mapStateToProps = state => {\n    if (!state.perspective.owner._id) {\n        return {\n            access: true\n        }\n    } else {\n        return {\n            access: (state.perspective.viewer === state.perspective.owner._id)\n        }\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setSignedIn: id => dispatch(setSignedIn(id)),\n        setOwner: id => dispatch(setOwner(id)),\n        setViewer: id => dispatch(setViewer(id)),\n        loadData: (id, label) => dispatch(loadData(id, label))\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MementosView)"]},"metadata":{},"sourceType":"module"}