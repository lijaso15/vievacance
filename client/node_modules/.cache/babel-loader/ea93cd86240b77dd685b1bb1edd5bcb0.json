{"ast":null,"code":"/**\r\n * Popup class is used to display information over chart area.\r\n */\nimport * as tslib_1 from \"tslib\";\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\n\nimport popupCSS from \"./PopupCSS\";\nimport { Adapter } from \"../utils/Adapter\";\nimport { BaseObjectEvents } from \"../Base\";\nimport { getInteraction } from \"../interaction/Interaction\";\nimport { keyboard } from \"../utils/Keyboard\";\nimport { MultiDisposer } from \"../utils/Disposer\";\nimport * as $type from \"../utils/Type\";\nimport * as $object from \"../utils/Object\";\n/**\r\n * Shows an HTML popup which covers window or a chart area.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v4/concepts/popups-and-modals/} For examples and docs on Popups and Modals.\r\n * @todo Positioning over whole window\r\n */\n\nvar Popup =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(Popup, _super);\n  /**\r\n   * Constructor\r\n   */\n\n\n  function Popup() {\n    var _this = _super.call(this) || this;\n    /**\r\n     * Adapter.\r\n     */\n\n\n    _this.adapter = new Adapter(_this);\n    /**\r\n     * Holds references to various HTML elements, Popup consists of.\r\n     */\n\n    _this._elements = {};\n    /**\r\n     * Holdes Interaction objects for various Popup's elements.\r\n     */\n\n    _this._IOs = {};\n    /**\r\n     * Contents of popup window.\r\n     */\n\n    _this._content = \"\";\n    /**\r\n     * Title of the popup window.\r\n     */\n\n    _this._title = \"\";\n    /**\r\n     * Prefix to apply to class names for popup elements.\r\n     */\n\n    _this._classPrefix = \"ampopup\";\n    /**\r\n     * If set to `true` [[Popup]] will use default styles.\r\n     */\n\n    _this._defaultStyles = true;\n    /**\r\n     * If set to `true` [[Popup]] will dim out all chart content behind it by\r\n     * showing a semi-transparent fill. (curtain)\r\n     */\n\n    _this._showCurtain = false;\n    /**\r\n     * Indicates whether popup can be dragged.\r\n     */\n\n    _this._draggable = true;\n    /**\r\n     * Horizontal position of the content window.\r\n     */\n\n    _this._align = \"center\";\n    /**\r\n     * Vertical position of the content window.\r\n     */\n\n    _this._verticalAlign = \"middle\";\n    /**\r\n     * Shift in position of the element. (used for dragging)\r\n     */\n\n    _this._shift = {\n      x: 0,\n      y: 0\n    };\n    /**\r\n     * Temporary shift in position of the element. (used for dragging)\r\n     */\n\n    _this._tempShift = {\n      x: 0,\n      y: 0\n    };\n    /**\r\n     * A title for screen readers. It is very highly recommended to set that title\r\n     * so that people using screen reader tools can get an immediate summary of\r\n     * the information in the popup.\r\n     */\n\n    _this._readerTitle = \"\";\n    /**\r\n     * Is popup closable?\r\n     */\n\n    _this._closable = true;\n    /**\r\n     * Was CSS already loaded?\r\n     */\n\n    _this._cssLoaded = false;\n    /**\r\n     * If set to other than \"none\" will try to re-adjust the position of the\r\n     * popop to fit within chart container or browser window.\r\n     *\r\n     * @ignore Feature not yet implemented\r\n     * @todo Implement\r\n     */\n\n    _this._fitTo = \"window\";\n    /**\r\n     * Identifies if this object is a \"template\" and should not be treated as\r\n     * real object that is drawn or actually used in the chart.\r\n     *\r\n     * @ignore Exclude from docs\r\n     */\n\n    _this.isTemplate = false;\n    /**\r\n     * Indicates if the element was already sized and should not be measured for\r\n     * sized again, saving some precious resources.\r\n     */\n\n    _this._sized = false;\n    _this.className = \"Popup\";\n    return _this;\n  }\n  /**\r\n   * Shows popup window.\r\n   */\n\n\n  Popup.prototype.open = function () {\n    if (this.container) {\n      if (this._elements.wrapper) {\n        this.container.appendChild(this._elements.wrapper);\n      }\n\n      if (this._elements.curtain) {\n        this.container.appendChild(this._elements.curtain);\n        this.showCurtain = this.showCurtain;\n      }\n\n      this.positionElement();\n      this.dispatchImmediately(\"opened\");\n    }\n  };\n  /**\r\n   * Hides popup window.\r\n   */\n\n\n  Popup.prototype.close = function () {\n    if (this._elements.wrapper) {\n      if (this._elements.wrapper.parentElement) {\n        this._elements.wrapper.parentElement.removeChild(this._elements.wrapper);\n      }\n    }\n\n    if (this._elements.curtain) {\n      if (this._elements.curtain.parentElement) {\n        this._elements.curtain.parentElement.removeChild(this._elements.curtain);\n      }\n    }\n\n    this.dispatchImmediately(\"closed\");\n    this.releasePointers();\n  };\n  /**\r\n   * Destroy (dispose) popup.\r\n   */\n\n\n  Popup.prototype.dispose = function () {\n    this.close();\n\n    _super.prototype.dispose.call(this);\n  };\n  /**\r\n   * Positions content element in the center of popup based on its actual size.\r\n   *\r\n   * @ignore Exclude from docs\r\n   */\n\n\n  Popup.prototype.positionElement = function (forceResize) {\n    var _this = this;\n\n    if (forceResize === void 0) {\n      forceResize = true;\n    }\n\n    if (!this._elements.wrapper) {\n      return;\n    }\n\n    setTimeout(function () {\n      if (!_this._elements.wrapper) {\n        return;\n      }\n\n      if (forceResize || !_this._sized) {\n        _this._elements.wrapper.style.opacity = \"0.01\";\n        _this._elements.wrapper.style.left = \"0\";\n        _this._elements.wrapper.style.top = \"0\";\n        _this._elements.wrapper.style.margin = \"0 0 0 0\"; // Size the element, but only for the first time\n\n        if (!_this._elements.wrapper.style.width) {\n          var bbox = _this._elements.wrapper.getBoundingClientRect();\n\n          _this._elements.wrapper.style.width = bbox.width + \"px\";\n          _this._elements.wrapper.style.height = bbox.height + \"px\";\n        }\n\n        _this._sized = true;\n      }\n\n      setTimeout(function () {\n        if (!_this._elements.wrapper) {\n          return;\n        }\n\n        var bbox;\n\n        if ((forceResize || !_this._sized) && _this._bbox) {\n          bbox = _this._bbox;\n        } else {\n          bbox = _this._elements.wrapper.getBoundingClientRect();\n          _this._elements.wrapper.style.opacity = \"\";\n        } // Set horizontal positioning\n\n\n        switch (_this.align) {\n          case \"left\":\n            _this._elements.wrapper.style.left = \"0\";\n            _this._elements.wrapper.style.right = \"auto\";\n            _this._elements.wrapper.style.marginLeft = _this.toStyle(_this._shift.x + _this._tempShift.x);\n            break;\n\n          case \"center\":\n            _this._elements.wrapper.style.left = \"50%\";\n            _this._elements.wrapper.style.right = \"auto\";\n            _this._elements.wrapper.style.marginLeft = _this.toStyle(Math.round(-bbox.width / 2) + (_this._shift.x + _this._tempShift.x));\n            break;\n\n          case \"right\":\n            _this._elements.wrapper.style.left = \"auto\";\n            _this._elements.wrapper.style.right = \"0\";\n            _this._elements.wrapper.style.marginLeft = _this.toStyle(_this._shift.x + _this._tempShift.x);\n            break;\n\n          default:\n            _this._elements.wrapper.style.left = _this.toStyle(_this.left) || \"auto\";\n            _this._elements.wrapper.style.right = _this.toStyle(_this.right) || \"auto\";\n            _this._elements.wrapper.style.marginLeft = _this.toStyle(_this._shift.x + _this._tempShift.x);\n            break;\n        } // Set vertical positioning\n\n\n        switch (_this.verticalAlign) {\n          case \"top\":\n            _this._elements.wrapper.style.top = \"0\";\n            _this._elements.wrapper.style.bottom = \"auto\";\n            _this._elements.wrapper.style.marginTop = _this.toStyle(_this._shift.y + _this._tempShift.y);\n            break;\n\n          case \"middle\":\n            _this._elements.wrapper.style.top = \"50%\";\n            _this._elements.wrapper.style.bottom = \"auto\";\n            _this._elements.wrapper.style.marginTop = _this.toStyle(Math.round(-bbox.height / 2) + (_this._shift.y + _this._tempShift.y));\n            break;\n\n          case \"bottom\":\n            _this._elements.wrapper.style.top = \"auto\";\n            _this._elements.wrapper.style.bottom = \"0\";\n            _this._elements.wrapper.style.marginTop = _this.toStyle(_this._shift.y + _this._tempShift.y);\n            break;\n\n          default:\n            _this._elements.wrapper.style.top = _this.toStyle(_this.top) || \"auto\";\n            _this._elements.wrapper.style.bottom = _this.toStyle(_this.bottom) || \"auto\";\n            _this._elements.wrapper.style.marginTop = _this.toStyle(_this._shift.y + _this._tempShift.y);\n            break;\n        }\n      }, 1);\n    }, 1);\n  };\n\n  Popup.prototype.setupDragging = function () {\n    var _this = this;\n\n    if (this.draggable) {\n      if (!this._IOs.wrapper.events.has(\"drag\")) {\n        this._IOs.wrapper.events.on(\"drag\", function (ev) {\n          _this._tempShift.x = ev.shift.x;\n          _this._tempShift.y = ev.shift.y;\n\n          _this.positionElement(false);\n        });\n      }\n\n      if (!this._IOs.wrapper.events.has(\"dragstop\")) {\n        this._IOs.wrapper.events.on(\"dragstop\", function (ev) {\n          _this._shift.x += _this._tempShift.x;\n          _this._shift.y += _this._tempShift.y;\n          _this._tempShift.x = 0;\n          _this._tempShift.y = 0;\n\n          _this.positionElement(false);\n        });\n      }\n    } else {\n      if (this._IOs.wrapper) {\n        if (this._IOs.wrapper.events.has(\"drag\")) {\n          this._IOs.wrapper.events.off(\"drag\");\n        }\n\n        if (this._IOs.wrapper.events.has(\"dragstop\")) {\n          this._IOs.wrapper.events.off(\"dragstop\");\n        }\n      }\n    }\n  };\n\n  Popup.prototype.toStyle = function (value) {\n    if (!$type.hasValue(value)) {\n      return null;\n    } else if ($type.isNumber(value)) {\n      return \"\" + value + \"px\";\n    } else {\n      return value.toString();\n    }\n  };\n\n  Object.defineProperty(Popup.prototype, \"classPrefix\", {\n    /**\r\n     * A prefix that is applied to class names of various popup elements.\r\n     *\r\n     * @return Class name prefix\r\n     */\n    get: function () {\n      return this.adapter.apply(\"classPrefix\", this._classPrefix);\n    },\n\n    /**\r\n     * @param value Class name prefix\r\n     */\n    set: function (value) {\n      this._classPrefix = value;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Popup.prototype, \"classPrefixRaw\", {\n    /**\r\n     * Returns raw prefix (without adapters applied).\r\n     *\r\n     * @ignore Exclude from docs\r\n     * @return Class name prefix\r\n     */\n    get: function () {\n      return this._classPrefix;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Popup.prototype, \"content\", {\n    /**\r\n     * @return Popup content\r\n     */\n    get: function () {\n      return this.adapter.apply(\"content\", this._content);\n    },\n\n    /**\r\n     * Popup content.\r\n     *\r\n     * Popup content can be any valid HTML, including CSS.\r\n     *\r\n     * @param value Popup content\r\n     */\n    set: function (value) {\n      if (this._content != value) {\n        this._content = value;\n\n        if (!this._elements.content) {\n          this.createContentElement();\n        }\n\n        this._elements.content.innerHTML = value;\n        this.positionElement();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Popup.prototype.getClassNames = function () {\n    return this.adapter.apply(\"classNames\", {\n      wrapperClass: this.classPrefix + \"\",\n      titleClass: this.classPrefix + \"-title\",\n      contentClass: this.classPrefix + \"-content\",\n      curtainClass: this.classPrefix + \"-curtain\",\n      closeClass: this.classPrefix + \"-close\"\n    });\n  };\n  /**\r\n   * Creates content element.\r\n   */\n\n\n  Popup.prototype.createContentElement = function () {\n    // Check if it's created already\n    if (this._elements.wrapper) {\n      return;\n    } // Get class names for popup elements\n\n\n    var classNames = this.getClassNames(); // Create content element\n\n    var wrapper = document.createElement(\"div\");\n    wrapper.className = classNames.contentClass;\n    wrapper.style.opacity = \"0.01\"; // Create close button\n\n    var close = document.createElement(\"a\");\n    close.className = classNames.closeClass; // Content title\n\n    var title = document.createElement(\"div\");\n    title.innerHTML = this.title;\n    title.className = classNames.titleClass;\n\n    if (!this.title) {\n      title.style.display = \"none\";\n    } // Content div\n\n\n    var content = document.createElement(\"div\");\n    content.innerHTML = this.content; // Set up events for content\n\n    this._IOs.wrapper = getInteraction().getInteraction(wrapper);\n\n    this._disposers.push(this._IOs.wrapper); // Set hover/out events\n\n\n    this._IOs.wrapper.events.on(\"over\", this.disablePointers, this);\n\n    this._IOs.wrapper.events.on(\"out\", this.releasePointers, this); // Create an InteractionObject for close\n\n\n    this._IOs.close = getInteraction().getInteraction(close);\n\n    this._disposers.push(this._IOs.close); // Hide close for now\n\n\n    close.style.visibility = \"hidden\"; // Add accessible stuff\n\n    wrapper.setAttribute(\"role\", \"dialog\"); // Add to wrapper\n\n    wrapper.appendChild(close);\n    wrapper.appendChild(title);\n    wrapper.appendChild(content);\n    this.container.appendChild(wrapper); // Save for later access\n\n    this._elements.wrapper = wrapper;\n    this._elements.content = content;\n    this._elements.title = title;\n    this._elements.close = close; // Load CSS\n\n    if (this.defaultStyles) {\n      this.loadDefaultCSS();\n    } // Create curtain as well\n\n\n    this.createCurtainElement(); // Apply events\n\n    this.applyEvents();\n    this.applyReaderSettings(); // Draggable?\n\n    this.setupDragging();\n  };\n\n  Object.defineProperty(Popup.prototype, \"title\", {\n    /**\r\n     * @return Popup title\r\n     */\n    get: function () {\n      return this.adapter.apply(\"title\", this._title);\n    },\n\n    /**\r\n     * Popup title.\r\n     *\r\n     * Popup title can be any valid HTML, including CSS.\r\n     *\r\n     * @param value  Popup title\r\n     */\n    set: function (value) {\n      if (this._title != value) {\n        this._title = value;\n\n        if (!this._elements.content) {\n          this.createContentElement();\n        }\n\n        this._elements.title.innerHTML = value;\n        this.positionElement();\n        this.applyReaderSettings();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Popup.prototype, \"readerTitle\", {\n    /**\r\n     * @return Popup content\r\n     */\n    get: function () {\n      return this.adapter.apply(\"readerTitle\", this._readerTitle != \"\" ? this._readerTitle : this.title);\n    },\n\n    /**\r\n     * A title for screen readers. It is very highly recommended to set that title\r\n     * so that people using screen reader tools can get an immediate summary of\r\n     * the information in the popup.\r\n     *\r\n     * @param value  Reader title\r\n     */\n    set: function (value) {\n      if (this._readerTitle != value) {\n        this._readerTitle = value;\n        this.applyReaderSettings();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Popup.prototype, \"closable\", {\n    /**\r\n     * @return Closable?\r\n     */\n    get: function () {\n      return this.adapter.apply(\"closable\", this._closable);\n    },\n\n    /**\r\n     * Is popup closable?\r\n     *\r\n     * If it is, it can be closed in a number of ways, e.g. by hitting ESC key,\r\n     * clicking curtain, or clicking the close button.\r\n     *\r\n     * If it is not closable, the only way to close it is via `close()` call.\r\n     *\r\n     * @param value Closable?\r\n     */\n    set: function (value) {\n      if (value !== this._closable) {\n        this._closable = value;\n        this.applyEvents();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Popup.prototype, \"fitTo\", {\n    /**\r\n     * @ignore\r\n     * @todo Implement\r\n     * @return Fit option\r\n     */\n    get: function () {\n      return this.adapter.apply(\"fitTo\", this._fitTo);\n    },\n\n    /**\r\n     * If set to other than \"none\" will try to re-adjust the position of the\r\n     * popop to fit within chart container or browser window.\r\n     *\r\n     * @ignore\r\n     * @todo Implement\r\n     * @default \"window\"\r\n     * @param value  Fit option\r\n     */\n    set: function (value) {\n      if (value != this._fitTo) {\n        this._fitTo = value;\n        this.positionElement();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Popup.prototype, \"defaultStyles\", {\n    /**\r\n     * @return Use default CSS?\r\n     */\n    get: function () {\n      return this.adapter.apply(\"defaultStyles\", this._defaultStyles);\n    },\n\n    /**\r\n     * Should popup use default CSS?\r\n     *\r\n     * If default CSS is disabled, an external CSS should handle the look of the\r\n     * popup, since it will look quite out of place otherwise.\r\n     *\r\n     * @default true\r\n     * @param Use default CSS?\r\n     */\n    set: function (value) {\n      if (this._defaultStyles != value) {\n        this._defaultStyles = value;\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Popup.prototype, \"showCurtain\", {\n    /**\r\n     * @return Show curtain?\r\n     */\n    get: function () {\n      return this.adapter.apply(\"showCurtain\", this._showCurtain);\n    },\n\n    /**\r\n     * Should popup use dim out all content behind it?\r\n     *\r\n     * @default false\r\n     * @param Show curtain?\r\n     */\n    set: function (value) {\n      if (this._showCurtain != value) {\n        this._showCurtain = value;\n\n        if (this._elements.curtain) {\n          this._elements.curtain.style.display = value ? \"block\" : \"none\";\n        }\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\r\n   * Creates curtain element.\r\n   */\n\n  Popup.prototype.createCurtainElement = function () {\n    // Get class names for popup elements\n    var classNames = this.getClassNames(); // Create the curtain\n\n    var curtain = document.createElement(\"div\");\n    curtain.className = classNames.curtainClass; // Append curtain to wrapper\n\n    this.container.appendChild(curtain); // Create an InteractionObject for curtain because we might need to\n    // set interactions on it\n\n    this._IOs.curtain = getInteraction().getInteraction(curtain); // Add Curtain IO to disposers\n\n    this._disposers.push(this._IOs.curtain); // Set events to disable underlying interactivity\n\n\n    this._IOs.curtain.events.on(\"over\", this.disablePointers, this);\n\n    this._IOs.curtain.events.on(\"out\", this.releasePointers, this); // Hide it?\n\n\n    curtain.style.display = this.showCurtain ? \"block\" : \"none\"; // Save for later\n\n    this._elements.curtain = curtain;\n  };\n\n  Object.defineProperty(Popup.prototype, \"draggable\", {\n    /**\r\n     * @return Show curtain?\r\n     */\n    get: function () {\n      return this.adapter.apply(\"draggable\", this._draggable);\n    },\n\n    /**\r\n     * Can the popup be dragged with a pointer?\r\n     *\r\n     * @default false\r\n     * @param Show curtain?\r\n     */\n    set: function (value) {\n      if (this._draggable != value) {\n        this._draggable = value;\n        this.setupDragging();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Popup.prototype, \"align\", {\n    /**\r\n     * @return Horizontal position\r\n     */\n    get: function () {\n      return this.adapter.apply(\"align\", this._align);\n    },\n\n    /**\r\n     * Horizontal positioning of the content window.\r\n     *\r\n     * Available options: \"left\", \"center\" (default), \"right\", and \"none\".\r\n     *\r\n     * @default \"center\"\r\n     * @param Horizontal position\r\n     */\n    set: function (value) {\n      if (this._align != value) {\n        this._align = value;\n        this.positionElement();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Popup.prototype, \"verticalAlign\", {\n    /**\r\n     * @return Vertical position\r\n     */\n    get: function () {\n      return this.adapter.apply(\"verticalAlign\", this._verticalAlign);\n    },\n\n    /**\r\n     * Vertical positioning of the content window.\r\n     *\r\n     * Available options: \"top\", \"middle\" (default), \"bottom\", and \"none\".\r\n     *\r\n     * @default \"middle\"\r\n     * @param Vertical position\r\n     */\n    set: function (value) {\n      if (this._verticalAlign != value) {\n        this._verticalAlign = value;\n        this.positionElement();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Popup.prototype, \"left\", {\n    /**\r\n     * @return Left\r\n     */\n    get: function () {\n      return this.adapter.apply(\"left\", this._left);\n    },\n\n    /**\r\n     * \"left\" coordinate of a non-aligned (`align = \"none\"`) popup.\r\n     *\r\n     * Can be either absolute pixel value, or relative (`Percent`).\r\n     *\r\n     * Setting this property will automatically set `align` to \"none\".\r\n     *\r\n     * NOTE: The position is relative to the chart container.\r\n     *\r\n     * @param Left\r\n     */\n    set: function (value) {\n      if (this.left != value) {\n        this._left = value;\n        this._align = \"none\";\n        this.positionElement();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Popup.prototype, \"right\", {\n    /**\r\n     * @return Right\r\n     */\n    get: function () {\n      return this.adapter.apply(\"right\", this._right);\n    },\n\n    /**\r\n     * \"right\" coordinate of a non-aligned (`align = \"none\"`) popup.\r\n     *\r\n     * Can be either absolute pixel value, or relative (`Percent`).\r\n     *\r\n     * Setting this property will automatically set `align` to \"none\".\r\n     *\r\n     * NOTE: The position is relative to the chart container.\r\n     *\r\n     * @param Right\r\n     */\n    set: function (value) {\n      if (this.right != value) {\n        this._right = value;\n        this._align = \"none\";\n        this.positionElement();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Popup.prototype, \"top\", {\n    /**\r\n     * @return Top\r\n     */\n    get: function () {\n      return this.adapter.apply(\"top\", this._top);\n    },\n\n    /**\r\n     * \"top\" coordinate of a non-aligned (`verticalAlign = \"none\"`) popup.\r\n     *\r\n     * Can be either absolute pixel value, or relative (`Percent`).\r\n     *\r\n     * Setting this property will automatically set `verticalAlign` to \"none\".\r\n     *\r\n     * NOTE: The position is relative to the chart container.\r\n     *\r\n     * @param Top\r\n     */\n    set: function (value) {\n      if (this.top != value) {\n        this._top = value;\n        this._verticalAlign = \"none\";\n        this.positionElement();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Popup.prototype, \"bottom\", {\n    /**\r\n     * @return Bottom\r\n     */\n    get: function () {\n      return this.adapter.apply(\"bottom\", this._bottom);\n    },\n\n    /**\r\n     * \"bottom\" coordinate of a non-aligned (`verticalAlign = \"none\"`) popup.\r\n     *\r\n     * Can be either absolute pixel value, or relative (`Percent`).\r\n     *\r\n     * Setting this property will automatically set `verticalAlign` to \"none\".\r\n     *\r\n     * NOTE: The position is relative to the chart container.\r\n     *\r\n     * @param Bottom\r\n     */\n    set: function (value) {\n      if (this.bottom != value) {\n        this._bottom = value;\n        this._verticalAlign = \"none\";\n        this.positionElement();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(Popup.prototype, \"elements\", {\n    /**\r\n     * Returns an object with references to various elements of the Popup.\r\n     *\r\n     * * `wrapper`\r\n     * * `title`\r\n     * * `content`\r\n     * * `close`\r\n     * * `curtain`\r\n     */\n    get: function () {\n      return this._elements;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\r\n   * Loads popup CSS.\r\n   *\r\n   * @ignore Exclude from docs\r\n   */\n\n  Popup.prototype.loadDefaultCSS = function () {\n    if (!this._cssLoaded) {\n      this._disposers.push(popupCSS(this.classPrefix));\n\n      $object.each(this._elements, function (key, el) {\n        el.style.display = \"\";\n      });\n      this._cssLoaded = true;\n    }\n  };\n  /**\r\n   * If popup is closable, this method adds various events to popup elements.\r\n   */\n\n\n  Popup.prototype.applyEvents = function () {\n    var _this = this;\n\n    if (this._IOs.close) {\n      if (this.closable) {\n        this._IOs.close.element.style.visibility = \"visible\";\n        var disposers = [getInteraction().body.events.on(\"keyup\", function (ev) {\n          if (keyboard.isKey(ev.event, \"esc\") && _this.closable) {\n            _this.close();\n          }\n        }), this._IOs.close.events.on(\"hit\", function (ev) {\n          _this.close();\n        })];\n        disposers.push(this._IOs.curtain.events.on(\"hit\", function (ev) {\n          if (_this.showCurtain) {\n            _this.close();\n          }\n        }));\n\n        this._disposers.push(new MultiDisposer(disposers));\n      } else {\n        this._IOs.close.element.style.visibility = \"hidden\";\n      }\n    }\n  };\n  /**\r\n   * Disables interactivity on parent chart.\r\n   */\n\n\n  Popup.prototype.disablePointers = function () {\n    if (this.sprite) {\n      this._spriteInteractionsEnabled = this.sprite.interactionsEnabled;\n      this.sprite.interactionsEnabled = false;\n    }\n  };\n  /**\r\n   * Releases temporarily disabled pointers on parent chart.\r\n   */\n\n\n  Popup.prototype.releasePointers = function () {\n    if ($type.hasValue(this._spriteInteractionsEnabled)) {\n      this.sprite.interactionsEnabled = this._spriteInteractionsEnabled;\n      this._spriteInteractionsEnabled = undefined;\n    }\n  };\n  /**\r\n   * Sets screen reader related settings.\r\n   */\n\n\n  Popup.prototype.applyReaderSettings = function () {\n    this.elements.wrapper.setAttribute(\"aria-label\", this.readerTitle);\n  };\n  /**\r\n   * Copies all properties and related data from different element.\r\n   *\r\n   * @param object Source element\r\n   */\n\n\n  Popup.prototype.copyFrom = function (source) {\n    _super.prototype.copyFrom.call(this, source);\n\n    this.container = source.container;\n    this.sprite = source.sprite;\n    this.classPrefix = source.classPrefixRaw;\n    this.content = source.content;\n    this.title = source.title;\n    this.readerTitle = source.readerTitle;\n    this.defaultStyles = source.defaultStyles;\n    this.showCurtain = source.showCurtain;\n    this.align = source.align;\n    this.verticalAlign = source.verticalAlign;\n    this.left = source.left;\n    this.right = source.right;\n    this.top = source.top;\n    this.bottom = source.bottom;\n    this.adapter.copyFrom(source.adapter);\n  };\n\n  return Popup;\n}(BaseObjectEvents);\n\nexport { Popup };","map":null,"metadata":{},"sourceType":"module"}